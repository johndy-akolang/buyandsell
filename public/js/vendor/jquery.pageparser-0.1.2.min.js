/* 
 * AjaxPageParser jQuery Plugin
 * Made by Erik Terwan
 * 6 February 2015 - 0.1.2
 * 
 * This plugin is provided as-is and released under the terms of the MIT license.
 */
!function(t){t.fn.pageParser=function(e){function i(){if(a.each(function(e){var i=t(this);t(this).attr("data-ppid",e+1),t(this).on(r.trigger,function(t){return n(i),t.preventDefault(),!1})}),null!=r.initialElement&&r.dynamicUrl){var e=t(r.initialElement).attr(r.urlAttribute),i={name:e,page:document.title,id:t(r.initialElement).attr("data-ppid")};history.pushState(i,document.title,e)}return t(window).on("popstate",function(){history.state&&t("*[data-ppid="+history.state.id+"]").length>0&&n(t("*[data-ppid="+history.state.id+"]"),!0)}),a}function n(e,i){r.before.call(e);var n=e.attr(r.urlAttribute),a=n,l=e.attr("data-ppid");null!=r.parseElement&&(a+=" "+r.parseElement),t(r.container).load(a,function(t,u,o){if("success"==u){var s=t.split("title>");s=s[1].split("</");var c=s[0];if(r.dynamicUrl&&1!=i){var d={name:a,page:c,id:l};history.pushState(d,c,n)}r.setTitle&&(document.title=c),r.finished.call(e)}else"error"==u&&r.error.call(o.status)})}var r=t.extend({container:null,dynamicUrl:!0,initialElement:null,parseElement:null,setTitle:!0,trigger:"click",urlAttribute:"href",before:function(){},finished:function(){},error:function(){}},e),a=this;return i()}}(jQuery);